# 美味点餐系统 - 网页版

## 项目简介

这是一个基于 Flask 的网页点餐系统，包含厨师端和客户端两个界面：

- **厨师端**: 管理菜品、查看订单、生成客户链接
- **客户端**: 浏览菜品、在线点餐、购物车管理

## 功能特色

### 厨师端功能
- ✅ 添加/删除菜品
- ✅ 上传菜品图片（支持 PNG、JPG、JPEG、GIF、BMP）
- ✅ 实时查看客户订单
- ✅ 完成订单并删除
- ✅ 生成专属客户链接
- ✅ 自动刷新订单状态

### 客户端功能
- ✅ 浏览精美菜品展示
- ✅ 购物车管理（添加/删除菜品）
- ✅ 随机菜品推荐
- ✅ 在线下单（支持自定义客户姓名）
- ✅ 响应式设计，支持手机访问

### 订单管理系统
- ✅ 实时订单同步
- ✅ 订单详情统计
- ✅ 客户身份识别
- ✅ 订单完成处理

## 安装和运行

### 1. 环境要求
- Python 3.7 或更高版本
- pip（Python 包管理器）

### 2. 安装依赖
在项目根目录运行：
```bash
pip install -r requirements.txt
```

### 3. 运行网页版应用
```bash
cd web
python app.py
```

### 4. 访问应用
应用启动后，在浏览器中访问：
- 主页: http://localhost:5000
- 厨师端: http://localhost:5000/chef
- 客户端: http://localhost:5000/customer

## 使用指南

### 厨师端使用流程
1. 访问厨师端：http://localhost:5000/chef
2. 点击"添加菜品"按钮，上传菜品信息和图片
3. 点击"生成客户链接"获取专属点餐链接
4. 将链接分享给客户进行点餐
5. 实时查看客户订单，完成制作后点击"完成订单"

### 客户端使用流程
1. 通过厨师分享的链接访问客户端
2. 浏览菜品，点击菜品图片或"加入购物车"按钮
3. 在购物车中管理已选菜品
4. 点击"确认下单"，填写姓名（可选）
5. 提交订单，等待厨师处理

### 特色功能说明
- **随机推荐**: 客户端提供随机菜品推荐功能
- **实时同步**: 厨师端每30秒自动刷新订单状态
- **客户识别**: 通过专属链接生成的客户ID识别不同客户
- **图片处理**: 自动处理上传的图片格式和大小
- **响应式设计**: 支持电脑、平板、手机多端访问

## 文件结构

```
dish-selector/
├── web/                    # 网页应用目录
│   ├── app.py             # 主应用文件
│   ├── templates/         # HTML 模板
│   │   ├── base.html      # 基础模板
│   │   ├── index.html     # 主页
│   │   ├── chef.html      # 厨师端
│   │   └── customer.html  # 客户端
│   └── static/            # 静态资源
│       └── css/
│           └── style.css  # 自定义样式
├── images/                # 菜品图片存储
├── orders/                # 订单文件存储
├── dishes.json           # 菜品数据
├── requirements.txt      # 依赖包列表
└── src/                  # 原桌面应用代码（保留）
```

## 数据说明

### 菜品数据格式 (dishes.json)
```json
[
  {
    "name": "菜品名称",
    "image_path": "images/图片文件名.jpg"
  }
]
```

### 订单数据格式
```json
{
  "id": "订单ID",
  "customer_name": "客户姓名",
  "customer_id": "客户ID",
  "dishes": ["菜品1", "菜品2"],
  "timestamp": 1234567890,
  "created_time": "2024-01-01 12:00:00",
  "status": "pending"
}
```

## 技术栈

- **后端**: Flask (Python Web 框架)
- **前端**: Bootstrap 5 + jQuery
- **图片处理**: Pillow (PIL)
- **数据存储**: JSON 文件
- **样式**: CSS3 + Font Awesome 图标

## 特性和优势

1. **简单易用**: 无需复杂配置，即装即用
2. **美观界面**: 现代化响应式设计
3. **实时更新**: 自动刷新订单状态
4. **移动友好**: 支持手机和平板访问
5. **数据安全**: 本地文件存储，数据可控
6. **功能完整**: 涵盖点餐全流程

## 注意事项

1. **图片存储**: 上传的图片存储在 `images/` 目录下
2. **订单管理**: 订单文件存储在 `orders/` 目录下
3. **端口配置**: 默认使用 5000 端口，可在 app.py 中修改
4. **文件权限**: 确保应用有读写 images/ 和 orders/ 目录的权限
5. **浏览器兼容**: 建议使用现代浏览器（Chrome、Firefox、Safari、Edge）

## 故障排除

### 常见问题
1. **端口被占用**: 修改 app.py 中的端口号
2. **图片上传失败**: 检查 images/ 目录权限
3. **订单不显示**: 检查 orders/ 目录权限
4. **页面样式异常**: 清除浏览器缓存

### 日志查看
应用运行时会在控制台显示详细日志，包括：
- 文件上传状态
- 订单处理信息
- 错误详情

## 扩展功能建议

未来可以考虑添加的功能：
- 用户注册和登录系统
- 菜品分类管理
- 订单历史查询
- 营业统计报表
- 微信/支付宝支付集成
- 短信/邮件通知

## 联系支持

如有问题或建议，欢迎联系开发团队。